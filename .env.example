# AutoSafe Backend Environment Variables
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control

# =============================================================================
# REQUIRED - Core Application
# =============================================================================

# Database connection string (PostgreSQL)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/autosafe

# Server port (Railway auto-injects this)
PORT=8000

# =============================================================================
# SECURITY - Admin Access Controls (REQUIRED FOR PRODUCTION)
# =============================================================================

# Primary Admin API key for protected endpoints
# MUST be at least 32 characters for production
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
ADMIN_API_KEY=your-secure-admin-api-key-here-must-be-32-chars

# Secondary Admin API key for key rotation (optional)
# Use this when rotating keys to avoid downtime
# ADMIN_API_KEY_SECONDARY=your-new-key-during-rotation

# IP addresses allowed to access admin endpoints (comma-separated)
# REQUIRED for production - set to your office IP, VPN exit, or CI/CD IPs
# Example: ADMIN_ALLOWED_IPS=203.0.113.50,198.51.100.25
ADMIN_ALLOWED_IPS=

# DANGER: Set to "true" to allow all IPs (DEVELOPMENT ONLY)
# NEVER enable this in production
# ADMIN_ALLOW_ALL_IPS=true

# =============================================================================
# SECURITY - CORS Configuration (REQUIRED FOR PRODUCTION)
# =============================================================================

# Allowed CORS origins (comma-separated, NO wildcards)
# Example: CORS_ORIGINS=https://autosafe.co.uk,https://www.autosafe.co.uk
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# SECURITY - SQLite Fallback Control
# =============================================================================

# Enable SQLite fallback (development only, auto-disabled in production)
# ENABLE_SQLITE_FALLBACK=true

# =============================================================================
# DATA RETENTION (optional - defaults shown)
# =============================================================================

# Days to retain leads before automated deletion
# RETENTION_LEADS_DAYS=90

# Days to retain lead assignments
# RETENTION_ASSIGNMENTS_DAYS=90

# Days to retain audit logs
# RETENTION_AUDIT_DAYS=365

# Days to retain inactive garages before deletion
# RETENTION_INACTIVE_GARAGES_DAYS=365

# =============================================================================
# REQUIRED - DVSA MOT History API (OAuth 2.0)
# =============================================================================

# OAuth 2.0 Client Credentials
DVSA_CLIENT_ID=your-dvsa-client-id
DVSA_CLIENT_SECRET=your-dvsa-client-secret
DVSA_TOKEN_URL=https://login.microsoftonline.com/your-tenant/oauth2/v2.0/token
DVSA_SCOPE=https://tapi.dvsa.gov.uk/.default

# Optional: API key for additional authentication
DVSA_API_KEY=your-dvsa-api-key

# =============================================================================
# OPTIONAL - Email Service (Resend)
# =============================================================================

# Resend API key for transactional emails
# Get one at: https://resend.com
RESEND_API_KEY=re_your_resend_api_key

# From email address (must be verified in Resend)
EMAIL_FROM=noreply@yourdomain.com

# Base URL for email links
BASE_URL=https://autosafe.co.uk

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Set to 1 to enable debug logging (never in production)
# DEBUG=1
